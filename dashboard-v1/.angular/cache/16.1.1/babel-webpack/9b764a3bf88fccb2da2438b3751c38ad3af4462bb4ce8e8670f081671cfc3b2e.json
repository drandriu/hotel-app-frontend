{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction LoginComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h3\", 4);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onLogout());\n    });\n    i0.ɵɵtext(4, \" Cerrar sesi\\u00F3n \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Bienvenido a la aplicaci\\u00F3n, \", ctx_r0.usuarioAutenticado, \"!\");\n  }\n}\nfunction LoginComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 6);\n    i0.ɵɵlistener(\"submit\", function LoginComponent_ng_template_2_Template_form_submit_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.onLogin());\n    });\n    i0.ɵɵelementStart(1, \"h3\", 7);\n    i0.ɵɵtext(2, \"Iniciar sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"label\", 8);\n    i0.ɵɵtext(5, \"Usuario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_ng_template_2_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.username = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"label\", 10);\n    i0.ɵɵtext(9, \"Contrase\\u00F1a\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_ng_template_2_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.password = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 12)(12, \"button\", 13);\n    i0.ɵɵtext(13, \" Iniciar sesi\\u00F3n \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.username);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.password);\n  }\n}\nexport class LoginComponent {\n  constructor(authService) {\n    this.authService = authService;\n    this.username = '';\n    this.password = '';\n    this.usuarioAutenticado = null;\n  }\n  onLogin() {\n    this.authService.login(this.username, this.password).subscribe({\n      next: response => {\n        alert('Inicio de sesión exitoso.');\n        //console.log('Login exitoso, token:', response);  // El token JWT debe ser una cadena de texto\n        // Guarda el token o haz algo con él\n        localStorage.setItem('token', response); // Guarda el token en el localStorage\n        localStorage.setItem('username', this.username);\n        this.usuarioAutenticado = this.username; // Actualiza la variable en la vista\n      },\n\n      error: err => {\n        console.error('Error al iniciar sesión:', err);\n        alert('Credenciales incorrectas');\n      }\n    });\n  }\n  onRegister() {\n    this.authService.register(this.username, this.password).subscribe({\n      next: response => {\n        alert('Registro exitoso.');\n        // Realiza alguna acción después de registrar, como redirigir a login\n      },\n\n      error: err => {\n        console.error('Error al registrar:', err);\n        alert('Error al registrar usuario');\n      }\n    });\n  }\n  onLogout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n    this.usuarioAutenticado = null;\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 4,\n  vars: 2,\n  consts: [[1, \"flex\", \"justify-center\", \"items-center\", \"mt-8\"], [\"class\", \"text-center\", 4, \"ngIf\", \"ngIfElse\"], [\"loginForm\", \"\"], [1, \"text-center\"], [1, \"text-2xl\", \"font-semibold\", \"text-gray-700\"], [1, \"mt-4\", \"px-4\", \"py-2\", \"bg-red-500\", \"text-white\", \"rounded-lg\", \"hover:bg-red-600\", 3, \"click\"], [1, \"space-y-4\", \"p-6\", \"bg-gray-100\", \"rounded-lg\", \"shadow-lg\", \"w-full\", \"max-w-sm\", 3, \"submit\"], [1, \"text-xl\", \"font-semibold\", \"text-center\", \"text-gray-700\", \"mb-4\"], [\"for\", \"username\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"type\", \"text\", \"id\", \"username\", \"name\", \"username\", \"placeholder\", \"Ingresa tu usuario\", 1, \"mt-1\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"p-2\", \"text-sm\", \"text-black\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"Ingresa tu contrase\\u00F1a\", 1, \"mt-1\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"p-2\", \"text-sm\", \"text-black\", 3, \"ngModel\", \"ngModelChange\"], [1, \"flex\", \"justify-between\", \"space-x-4\"], [\"type\", \"submit\", 1, \"w-full\", \"rounded-lg\", \"bg-blue-500\", \"py-2\", \"text-white\", \"font-medium\", \"hover:bg-blue-600\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, LoginComponent_div_1_Template, 5, 1, \"div\", 1);\n      i0.ɵɵtemplate(2, LoginComponent_ng_template_2_Template, 14, 2, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(3);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.usuarioAutenticado)(\"ngIfElse\", _r1);\n    }\n  },\n  dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LoginComponent_div_1_Template_button_click_3_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","onLogout","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","usuarioAutenticado","LoginComponent_ng_template_2_Template_form_submit_0_listener","_r6","ctx_r5","onLogin","LoginComponent_ng_template_2_Template_input_ngModelChange_6_listener","$event","ctx_r7","username","LoginComponent_ng_template_2_Template_input_ngModelChange_10_listener","ctx_r8","password","ɵɵproperty","ctx_r2","LoginComponent","constructor","authService","login","subscribe","next","response","alert","localStorage","setItem","error","err","console","onRegister","register","removeItem","ɵɵdirectiveInject","i1","AuthService","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵtemplate","LoginComponent_div_1_Template","LoginComponent_ng_template_2_Template","ɵɵtemplateRefExtractor","_r1"],"sources":["C:\\Users\\usuario\\Desktop\\empresa\\hotel-app-frontend\\dashboard-v1\\src\\app\\pages\\login\\login\\login.component.ts","C:\\Users\\usuario\\Desktop\\empresa\\hotel-app-frontend\\dashboard-v1\\src\\app\\pages\\login\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n\n  username: string = '';\n  password: string = '';\n  usuarioAutenticado: string | null = null;\n\n  constructor(private authService: AuthService) {}\n\n  onLogin() {\n    this.authService.login(this.username, this.password).subscribe({\n      next: (response) => {\n        alert('Inicio de sesión exitoso.');\n        //console.log('Login exitoso, token:', response);  // El token JWT debe ser una cadena de texto\n        // Guarda el token o haz algo con él\n        localStorage.setItem('token', response);  // Guarda el token en el localStorage\n        localStorage.setItem('username', this.username);\n        this.usuarioAutenticado = this.username; // Actualiza la variable en la vista\n      },\n      error: (err) => {\n        console.error('Error al iniciar sesión:', err);\n        alert('Credenciales incorrectas');\n      }\n    });\n  }\n\n  onRegister() {\n    this.authService.register(this.username, this.password).subscribe({\n      next: (response) => {\n        alert('Registro exitoso.');\n        // Realiza alguna acción después de registrar, como redirigir a login\n      },\n      error: (err) => {\n        console.error('Error al registrar:', err);\n        alert('Error al registrar usuario');\n      }\n    });\n  }\n  onLogout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n    this.usuarioAutenticado = null;\n  }\n}\n","<div class=\"flex justify-center items-center mt-8\">\n    <div *ngIf=\"usuarioAutenticado; else loginForm\" class=\"text-center\">\n      <h3 class=\"text-2xl font-semibold text-gray-700\">Bienvenido a la aplicación, {{ usuarioAutenticado }}!</h3>\n      <button (click)=\"onLogout()\" class=\"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600\">\n        Cerrar sesión\n      </button>\n    </div>\n  \n    <ng-template #loginForm>\n      <form (submit)=\"onLogin()\" class=\"space-y-4 p-6 bg-gray-100 rounded-lg shadow-lg w-full max-w-sm\">\n        <h3 class=\"text-xl font-semibold text-center text-gray-700 mb-4\">Iniciar sesión</h3>\n        <div>\n          <label for=\"username\" class=\"block text-sm font-medium text-gray-700\">Usuario</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            name=\"username\"\n            [(ngModel)]=\"username\"\n            placeholder=\"Ingresa tu usuario\"\n            class=\"mt-1 w-full rounded-md border border-gray-300 p-2 text-sm text-black\"\n          />\n        </div>\n        <div>\n          <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">Contraseña</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            [(ngModel)]=\"password\"\n            placeholder=\"Ingresa tu contraseña\"\n            class=\"mt-1 w-full rounded-md border border-gray-300 p-2 text-sm text-black\"\n          />\n        </div>\n        <div class=\"flex justify-between space-x-4\">\n          <button type=\"submit\" class=\"w-full rounded-lg bg-blue-500 py-2 text-white font-medium hover:bg-blue-600\">\n            Iniciar sesión\n          </button>\n        </div>\n      </form>\n    </ng-template>\n  </div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}